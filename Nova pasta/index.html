<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gest√£o de Biblioteca</title>
    <!-- Carrega Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define a fonte Inter como padr√£o */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Cores e profundidade */
        .tab-btn {
            @apply px-4 py-2 text-sm font-semibold text-gray-600 bg-white rounded-t-xl transition-all duration-200 ease-in-out border-b-4 border-transparent hover:text-blue-600 hover:border-blue-300;
        }
        .tab-btn.active {
            @apply text-blue-800 border-blue-600 bg-white shadow-inner-t;
        }
        .section-hidden {
            display: none;
        }
        
        /* Estilos para a lista de dados */
        .data-list {
            min-height: 200px;
            max-height: 55vh;
            overflow-y: auto;
            @apply divide-y divide-gray-200 p-3; 
        }

        /* Classes de bot√µes mais expressivas e modernas */
        .btn-primary {
            @apply px-6 py-3 text-base font-extrabold text-white bg-blue-600 rounded-2xl hover:bg-blue-700 transition duration-300 shadow-lg shadow-blue-500/50 hover:shadow-xl hover:shadow-blue-600/60;
        }
        .btn-success {
            @apply px-6 py-3 text-base font-bold text-white bg-green-600 rounded-2xl hover:bg-green-700 transition duration-300 shadow-lg shadow-green-500/50;
        }
        .btn-danger {
            @apply px-4 py-1.5 text-sm font-semibold text-white bg-red-600 rounded-xl hover:bg-red-700 transition duration-150 ml-2 shadow-md;
        }
        .btn-secondary {
            @apply px-2.5 py-1 text-xs font-medium text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition duration-150 ml-1;
        }
        .card {
            @apply bg-white p-8 shadow-2xl rounded-[20px] border border-gray-100;
        }
        /* Garantindo que o conte√∫do da lista de acervo n√£o seja espremido */
        #acervoList li > div:first-child {
            max-width: 65%;
            min-width: 250px;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans antialiased">

    <!-- Container Central -->
    <div class="max-w-5xl mx-auto p-4 md:p-8 pt-12">

        <!-- Tela de Login -->
        <section id="login-screen" class="max-w-md mx-auto card">
            <h1 class="text-4xl font-black text-center text-gray-800 mb-6 pb-4">
                üìö Gest√£o de Acervo
            </h1>
            <h2 class="text-xl font-medium text-center text-blue-600 mb-6">Acesso de Bibliotec√°rio</h2>
            <div id="message-container" class="mb-4"></div>
            
            <div class="space-y-6">
                <input type="password" id="loginPassword" placeholder="Senha do Funcion√°rio (Dica: 1234)" 
                       class="w-full p-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-blue-200 text-lg">
                <button onclick="handleLogin()" 
                        class="w-full btn-primary py-4">
                    ACESSAR O PAINEL
                </button>
            </div>
        </section>

        <!-- Dashboard Principal (Gerenciamento) -->
        <section id="dashboard" class="section-hidden">
            <header class="card flex justify-between items-center py-4 mb-6">
                <h1 class="text-3xl font-extrabold text-gray-800">Painel de Bibliotec√°rio</h1>
                <button onclick="handleLogout()" class="px-6 py-2 text-sm font-semibold text-red-600 border border-red-300 rounded-xl hover:bg-red-50 transition duration-150 shadow-md">
                    Sair
                </button>
            </header>

            <div id="message-container" class="mb-6"></div>

            <!-- Abas de Navega√ß√£o -->
            <nav class="flex space-x-1 border-b border-gray-200 mb-6 bg-white p-2 rounded-t-2xl shadow-md">
                <button class="tab-btn active" data-section="users-section" onclick="showSection('users-section', this)">Usu√°rios (<span id="userCount">0</span>)</button>
                <button class="tab-btn" data-section="acervo-section" onclick="showSection('acervo-section', this)">Acervo (<span id="acervoCount">0</span>)</button>
                <button class="tab-btn" data-section="loans-section" onclick="showSection('loans-section', this)">Empr√©stimos Ativos (<span id="emprestimoCount">0</span>)</button>
                <button class="tab-btn" data-section="reservas-section" onclick="showSection('reservas-section', this)">Reservas Pendentes (<span id="reservaCount">0</span>)</button>
                <button class="tab-btn" data-section="reports-section" onclick="showSection('reports-section', this); generateReports()">Relat√≥rios</button>
            </nav>

            <!-- 1. Se√ß√£o Usu√°rios -->
            <section id="users-section">
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="card">
                        <h2 class="text-2xl font-bold text-gray-700 mb-4 border-b pb-3 text-blue-600">Cadastrar Novo Usu√°rio</h2>
                        <div class="space-y-5">
                            <input type="text" id="userName" placeholder="Nome Completo do Usu√°rio" 
                                   class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-400">
                            <select id="userType" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-400">
                                <option value="Aluno">Aluno</option>
                                <option value="Colaborador">Colaborador</option>
                                <option value="Bibliotec√°rio">Bibliotec√°rio</option>
                                <option value="Administrador">Administrador</option>
                            </select>
                            <button onclick="handleCreateUser()" class="btn-primary w-full py-3">
                                Cadastrar Usu√°rio
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <h3 class="text-2xl font-bold text-gray-700 mb-4 border-b pb-3">Lista de Usu√°rios Cadastrados</h3>
                        <ul id="userList" class="data-list">
                            <!-- Lista de usu√°rios ser√° renderizada aqui -->
                        </ul>
                    </div>
                </div>
            </section>

            <!-- 2. Se√ß√£o Acervo -->
            <section id="acervo-section" class="section-hidden">
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="card">
                        <h2 class="text-2xl font-bold text-gray-700 mb-4 border-b pb-3 text-blue-600">Adicionar Novo Item</h2>
                        <div class="space-y-5">
                            <input type="text" id="acervoTitulo" placeholder="T√≠tulo do Material" 
                                   class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-400">
                            <input type="text" id="acervoAutor" placeholder="Autor/Editora" 
                                   class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-400">
                            <select id="acervoTipo" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-400">
                                <option value="Livro">Livro</option>
                                <option value="Revista">Revista</option>
                                <option value="Eletr√¥nico">Dispositivo Eletr√¥nico</option>
                            </select>
                            <button onclick="handleCreateAcervo()" class="btn-primary w-full py-3">
                                Adicionar Item ao Acervo
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <h3 class="text-2xl font-bold text-gray-700 mb-4 border-b pb-3">Itens no Acervo</h3>
                        <ul id="acervoList" class="data-list">
                            <!-- Lista do acervo ser√° renderizada aqui -->
                        </ul>
                    </div>
                </div>
            </section>

            <!-- 3. Se√ß√£o Empr√©stimos -->
            <section id="loans-section" class="section-hidden">
                <div class="card mb-8">
                    <h2 class="text-2xl font-bold text-gray-700 mb-4 border-b pb-3 text-green-600">Registrar Novo Empr√©stimo</h2>
                    <div class="md:flex space-y-4 md:space-y-0 md:space-x-4 items-center">
                        <input type="text" id="emprestimoUserId" placeholder="ID do Usu√°rio" 
                               class="flex-1 p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-400">
                        <input type="text" id="emprestimoAcervoId" placeholder="ID do Item do Acervo" 
                               class="flex-1 p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-400">
                        <button onclick="handleCreateEmprestimo()" class="btn-success flex-shrink-0 px-6 py-3">
                            Confirmar Empr√©stimo
                        </button>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-2xl font-bold text-gray-700 mb-4 border-b pb-3">Empr√©stimos Ativos (Aguardando Devolu√ß√£o)</h3>
                    <ul id="emprestimoList" class="data-list">
                        <!-- Lista de empr√©stimos ser√° renderizada aqui -->
                        <!-- Lista de empr√©stimos ser√° renderizada aqui -->
                    </ul>
                </div>
            </section>

            <!-- 4. Se√ß√£o Reservas -->
            <section id="reservas-section" class="section-hidden">
                <div class="card">
                    <h2 class="text-2xl font-bold text-gray-700 mb-4 border-b pb-3 text-blue-600">Gerenciamento de Reservas</h2>
                    <h3 class="text-xl font-medium mb-3 text-blue-700">Reservas Prontas para Retirada / Pendentes</h3>
                    <ul id="reservaList" class="data-list">
                        <!-- Lista de reservas ser√° renderizada aqui -->
                    </ul>
                    <p class="text-sm text-gray-500 mt-4 pt-4 border-t">
                        * O prazo de retirada para reservas √© de **24 horas** a partir da data de disponibilidade. O sistema verifica a expira√ß√£o ao clicar em "Retirar".
                    </p>
                </div>
            </section>

            <!-- 5. Se√ß√£o Relat√≥rios -->
            <section id="reports-section" class="section-hidden">
                <h2 class="text-2xl font-bold text-gray-700 mb-4">Relat√≥rios e Estat√≠sticas</h2>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Relat√≥rio de Usu√°rios em Atraso/Suspensos -->
                    <div class="card">
                        <h3 class="text-xl font-bold text-red-700 mb-3 border-b pb-2">Usu√°rios em Atraso e Suspensos</h3>
                        <div id="lateUsersReport" class="data-list">
                            <!-- O relat√≥rio de atraso ser√° renderizado aqui -->
                        </div>
                    </div>

                    <!-- Relat√≥rio de Itens Mais Emprestados (Ativos) -->
                    <div class="card">
                        <h3 class="text-xl font-bold text-blue-700 mb-3 border-b pb-2">Itens Mais Emprestados (Ativos)</h3>
                        <div id="mostBorrowedReport" class="data-list">
                            <!-- O relat√≥rio de itens mais emprestados ser√° renderizado aqui -->
                        </div>
                    </div>
                </div>
                
                <p class="text-sm text-gray-600 mt-8 bg-gray-200 p-4 rounded-xl shadow-inner">
                    **Notifica√ß√µes Autom√°ticas:** Alertas de prazo pr√≥ximo (24h) s√£o verificadas e exibidas na mensagem de *feedback* automaticamente no Login.
                </p>
            </section>

        </section>

    </div>

    <!-- Script da L√≥gica (Deve estar no mesmo diret√≥rio) -->
    <script src="app.js"></script>
</body>
</html>

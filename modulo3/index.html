<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca+ | Gest√£o de Acervos e Empr√©stimos</title>
    <!-- Carregamento do Tailwind e da Fonte -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Link para o novo arquivo CSS -->
    <link rel="stylesheet" href="./style.css">
</head>
<body class="flex flex-col">

    <!-- Container de Notifica√ß√µes Toast (mantido, mas n√£o usado por este JS) -->
    <div id="toast-container"></div>

    <!-- Header do Sistema -->
    <header>
        <div class="max-w-7xl mx-auto flex flex-col sm:flex-row justify-between items-center">
            <div class="text-center sm:text-left">
                <h1>üìö Biblioteca+ Solu√ß√µes</h1>
                <p>Sistema Completo de Gest√£o Bibliotec√°ria</p>
            </div>
            <div id="auth-status" class="text-sm mt-2 sm:mt-0">
                Usu√°rio: <span id="current-user-id" class="font-medium">Sistema Local</span>
            </div>
        </div>
    </header>

    <!-- Navega√ß√£o -->
    <nav>
        <button class="nav-btn" onclick="showModule('usuarios')">
            üë• Usu√°rios
        </button>
        <button class="nav-btn" onclick="showModule('acervos')">
            üìñ Acervos
        </button>
        <button class="nav-btn active" onclick="showModule('emprestimos')">
            üì§ Empr√©stimos
        </button>
        <button class="nav-btn" onclick="showModule('reservas')">
            üîñ Reservas
        </button>
        <button class="nav-btn" onclick="showModule('relatorios')">
            üìä Relat√≥rios
        </button>
    </nav>

    <main>
        <!-- M√ìDULO 1: CADASTRO DE USU√ÅRIOS -->
        <div id="usuarios" class="module">
            <section class="container-card">
                <h2>üë• Cadastro e Gest√£o de Usu√°rios</h2>
                <div id="usuarioSuccess" class="alert alert-success">‚úÖ Usu√°rio cadastrado/atualizado com sucesso!</div>
                <div id="usuarioError" class="alert alert-danger">‚ùå Erro na valida√ß√£o. Preencha todos os campos obrigat√≥rios corretamente.</div>
                
                <form id="usuarioForm">
                    <h3>Novo Usu√°rio</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="usuarioNome">Nome Completo<span class="required">*</span>:</label>
                            <input type="text" id="usuarioNome" required>
                            <div class="error-message" id="usuarioNomeError">O nome √© obrigat√≥rio.</div>
                        </div>
                        <div class="form-group">
                            <label for="usuarioCpf">CPF<span class="required">*</span>:</label>
                            <input type="text" id="usuarioCpf" maxlength="14" required>
                            <div class="error-message" id="usuarioCpfError">CPF inv√°lido ou obrigat√≥rio.</div>
                        </div>
                        <div class="form-group">
                            <label for="usuarioEmail">E-mail<span class="required">*</span>:</label>
                            <input type="email" id="usuarioEmail" required>
                            <div class="error-message" id="usuarioEmailError">E-mail inv√°lido ou obrigat√≥rio.</div>
                        </div>
                        <div class="form-group">
                            <label for="usuarioTelefone">Telefone:</label>
                            <input type="tel" id="usuarioTelefone" maxlength="15">
                            <div class="error-message" id="usuarioTelefoneError">Telefone inv√°lido.</div>
                        </div>
                        <div class="form-group">
                            <label for="usuarioTipo">Tipo de Usu√°rio<span class="required">*</span>:</label>
                            <select id="usuarioTipo" required>
                                <option value="">Selecione</option>
                                <option value="Aluno">Aluno</option>
                                <option value="Professor">Professor</option>
                                <option value="Colaborador">Colaborador</option>
                            </select>
                            <div class="error-message" id="usuarioTipoError">O tipo √© obrigat√≥rio.</div>
                        </div>
                        <div class="form-group">
                            <label for="usuarioMatricula">Matr√≠cula/ID<span class="required">*</span>:</label>
                            <input type="text" id="usuarioMatricula" required>
                            <div class="error-message" id="usuarioMatriculaError">A matr√≠cula √© obrigat√≥ria.</div>
                        </div>
                    </div>
                    <div class="btn-group">
                        <button type="button" class="btn btn-secondary" onclick="limparUsuarioForm()">Limpar</button>
                        <button type="submit" class="btn btn-primary">Salvar Usu√°rio</button>
                    </div>
                </form>

            </section>
            
            <section class="container-card mt-6">
                <h2>Lista de Usu√°rios</h2>
                <div class="flex flex-col sm:flex-row gap-4 mb-4">
                    <input type="text" id="searchUsuarioNome" class="flex-grow" placeholder="üîç Pesquisar por nome...">
                    <select id="searchUsuarioTipo">
                        <option value="">Filtrar por Tipo (Todos)</option>
                        <option value="Aluno">Aluno</option>
                        <option value="Professor">Professor</option>
                        <option value="Colaborador">Colaborador</option>
                    </select>
                </div>

                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>CPF</th>
                                <th>Tipo</th>
                                <th>Matr√≠cula</th>
                                <th>Status</th>
                                <th>Empr√©stimos (Ativos/Limite)</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="usuariosTable">
                            <!-- Conte√∫do inserido pelo JS -->
                        </tbody>
                    </table>
                </div>
            </section>
        </div>

        <!-- M√ìDULO 2: GEST√ÉO DE ACERVOS -->
        <div id="acervos" class="module">
            <section class="container-card">
                <h2>üìñ Cadastro e Gest√£o de Acervos</h2>
                <div id="acervoSuccess" class="alert alert-success">‚úÖ Item de acervo cadastrado/atualizado com sucesso!</div>

                <form id="acervoForm">
                    <h3>Novo Item</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="acervoTitulo">T√≠tulo<span class="required">*</span>:</label>
                            <input type="text" id="acervoTitulo" required>
                            <div class="error-message" id="acervoTituloError">O t√≠tulo √© obrigat√≥rio.</div>
                        </div>
                        <div class="form-group">
                            <label for="acervoAutor">Autor<span class="required">*</span>:</label>
                            <input type="text" id="acervoAutor" required>
                            <div class="error-message" id="acervoAutorError">O autor √© obrigat√≥rio.</div>
                        </div>
                        <div class="form-group">
                            <label for="acervoCategoria">Categoria<span class="required">*</span>:</label>
                            <select id="acervoCategoria" required>
                                <option value="">Selecione</option>
                                <option value="Literatura">Literatura</option>
                                <option value="Ci√™ncia">Ci√™ncia</option>
                                <option value="Hist√≥ria">Hist√≥ria</option>
                                <option value="Did√°tico">Did√°tico</option>
                            </select>
                            <div class="error-message" id="acervoCategoriaError">A categoria √© obrigat√≥ria.</div>
                        </div>
                        <div class="form-group">
                            <label for="acervoTipo">Tipo<span class="required">*</span>:</label>
                            <select id="acervoTipo" required>
                                <option value="">Selecione</option>
                                <option value="Livro">Livro</option>
                                <option value="Revista">Revista</option>
                                <option value="Eletr√¥nico">Eletr√¥nico</option>
                            </select>
                            <div class="error-message" id="acervoTipoError">O tipo √© obrigat√≥rio.</div>
                        </div>
                        <div class="form-group">
                            <label for="acervoExemplares">Qtd. Exemplares<span class="required">*</span>:</label>
                            <input type="number" id="acervoExemplares" min="1" value="1" required>
                            <div class="error-message" id="acervoExemplaresError">O n√∫mero de exemplares deve ser maior que 0.</div>
                        </div>
                        <div class="form-group">
                            <label for="acervoStatus">Status Inicial:</label>
                            <select id="acervoStatus">
                                <option value="Dispon√≠vel">Dispon√≠vel</option>
                                <option value="Em Manuten√ß√£o">Em Manuten√ß√£o</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group full-width">
                        <label for="acervoDescricao">Descri√ß√£o/Observa√ß√µes:</label>
                        <textarea id="acervoDescricao"></textarea>
                    </div>
                    
                    <div class="btn-group">
                        <button type="button" class="btn btn-secondary" onclick="limparAcervoForm()">Limpar</button>
                        <button type="submit" class="btn btn-primary">Salvar Item</button>
                    </div>
                </form>
            </section>

            <section class="container-card mt-6">
                <h2>Acervos Cadastrados</h2>
                <div class="flex flex-col sm:flex-row gap-4 mb-4">
                    <input type="text" id="searchAcervoTitulo" class="flex-grow" placeholder="üîç Pesquisar por t√≠tulo...">
                    <input type="text" id="searchAcervoAutor" class="flex-grow" placeholder="üîç Pesquisar por autor...">
                    <select id="searchAcervoCategoria">
                        <option value="">Categoria (Todas)</option>
                        <option value="Literatura">Literatura</option>
                        <option value="Ci√™ncia">Ci√™ncia</option>
                        <option value="Hist√≥ria">Hist√≥ria</option>
                        <option value="Did√°tico">Did√°tico</option>
                    </select>
                    <select id="searchAcervoStatus">
                        <option value="">Status (Todos)</option>
                        <option value="Dispon√≠vel">Dispon√≠vel</option>
                        <option value="Emprestado">Emprestado</option>
                        <option value="Reservado">Reservado</option>
                        <option value="Em Manuten√ß√£o">Em Manuten√ß√£o</option>
                    </select>
                </div>

                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>T√≠tulo</th>
                                <th>Autor</th>
                                <th>Categoria</th>
                                <th>Exemplares</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="acervosTable">
                            <!-- Conte√∫do inserido pelo JS -->
                        </tbody>
                    </table>
                </div>
            </section>
        </div>

        <!-- M√ìDULO 3: EMPR√âSTIMOS E DEVOLU√á√ïES (IDs Ajustados) -->
        <div id="emprestimos" class="module active">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-4">
                
                <!-- Registro de Empr√©stimo -->
                <section class="container-card" id="loan-section">
                    <h2>üìã Registro de Novo Empr√©stimo</h2>
                    
                    <!-- ID para valida√ß√£o -->
                    <div id="emprestimoSuccess" class="alert alert-success">‚úÖ Empr√©stimo realizado com sucesso!</div>
                    <div id="emprestimoWarning" class="alert alert-warning">‚ö†Ô∏è Aten√ß√£o: Verifique os avisos ou preencha os campos.</div>
                    
                    <form id="emprestimoForm">
                        <div class="form-grid">
                            <!-- Usu√°rio (ID alterado) -->
                            <div class="form-group">
                                <label for="emprestimoUsuario">Usu√°rio<span class="required">*</span>:</label>
                                <select id="emprestimoUsuario" required>
                                    <option value="">Selecione o usu√°rio</option>
                                </select>
                                <div class="error-message" id="emprestimoUsuarioError">Selecione um usu√°rio.</div>
                            </div>

                            <!-- Acervo/Item (ID alterado) -->
                            <div class="form-group">
                                <label for="emprestimoAcervo">Item do Acervo<span class="required">*</span>:</label>
                                <select id="emprestimoAcervo" required>
                                    <option value="">Selecione o acervo</option>
                                </select>
                                <div class="error-message" id="emprestimoAcervoError">Selecione um acervo dispon√≠vel.</div>
                            </div>
                        </div>

                        <div class="form-grid">
                            <!-- Data do Empr√©stimo (ID alterado) -->
                            <div class="form-group">
                                <label for="emprestimoData">Data de Empr√©stimo<span class="required">*</span>:</label>
                                <input type="date" id="emprestimoData" readonly>
                            </div>

                            <!-- Data Prevista de Devolu√ß√£o (ID alterado) -->
                            <div class="form-group">
                                <label for="emprestimoDataDevolucao">Data Prevista de Devolu√ß√£o<span class="required">*</span>:</label>
                                <input type="date" id="emprestimoDataDevolucao">
                                <div class="error-message" id="emprestimoDataDevolucaoError">A data de devolu√ß√£o √© obrigat√≥ria.</div>
                            </div>
                        </div>
                        
                        <div class="pt-2">
                            <button type="submit" class="btn btn-primary">
                                <span>‚úì Registrar Empr√©stimo</span>
                            </button>
                        </div>
                    </form>
                </section>

                <!-- Devolu√ß√£o (simplificado para usar o renderEmprestimosAtivos) -->
                <section class="container-card" id="return-section">
                    <h2>üì• Empr√©stimos Ativos e Devolu√ß√µes</h2>
                    
                    <div id="devolucaoSuccess" class="alert alert-success">‚úÖ Devolu√ß√£o registrada com sucesso!</div>
                    
                    <div id="emprestimosAtivos" class="space-y-4">
                        <p class="empty-state">Nenhum empr√©stimo ativo no momento.</p>
                        <!-- Cards de Empr√©stimos ser√£o inseridos aqui -->
                    </div>
                </section>
            </div>
            
            <!-- Tabela de Hist√≥rico (M√≥dulo 3 n√£o usa esta tabela no JS fornecido, mas mantemos o layout caso queira evoluir) -->
            <section class="container-card mt-6" id="items-section">
                <h2>üßæ Hist√≥rico Completo de Empr√©stimos</h2>
                <p class="text-gray-600 mb-4">O hist√≥rico completo pode ser visualizado no m√≥dulo de Relat√≥rios.</p>
                <div class="table-wrapper">
                    <!-- Tabela Vazia - o JS n√£o tem uma fun√ß√£o de renderiza√ß√£o para este hist√≥rico espec√≠fico. -->
                </div>
            </section>
        </div>

        <!-- M√ìDULO 4: RESERVAS -->
        <div id="reservas" class="module">
            <section class="container-card">
                <h2>üîñ Registrar Reserva</h2>
                <div id="reservaSuccess" class="alert alert-success">‚úÖ Reserva realizada com sucesso!</div>

                <form id="reservaForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="reservaUsuario">Usu√°rio<span class="required">*</span>:</label>
                            <select id="reservaUsuario" required>
                                <option value="">Selecione o usu√°rio</option>
                            </select>
                            <div class="error-message" id="reservaUsuarioError">Selecione um usu√°rio.</div>
                        </div>
                        <div class="form-group">
                            <label for="reservaAcervo">Item Emprestado<span class="required">*</span>:</label>
                            <select id="reservaAcervo" required>
                                <option value="">Selecione o item</option>
                            </select>
                            <div class="error-message" id="reservaAcervoError">Selecione um acervo para reservar.</div>
                        </div>
                    </div>
                    <div class="pt-2">
                        <button type="submit" class="btn btn-primary">
                            <span>+ Realizar Reserva</span>
                        </button>
                    </div>
                </form>
            </section>
            
            <section class="container-card mt-6">
                <h2>Reservas Ativas</h2>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th>Usu√°rio</th>
                                <th>Data da Reserva</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="reservasTable">
                            <!-- Conte√∫do inserido pelo JS -->
                        </tbody>
                    </table>
                </div>
            </section>
        </div>

        <!-- M√ìDULO 5: NOTIFICA√á√ïES E RELAT√ìRIOS -->
        <div id="relatorios" class="module">
            <section class="container-card">
                <h2>üìä Dashboard e Relat√≥rios</h2>
                <div class="btn-group justify-start mb-4">
                    <button id="btnGerarRelatorio" class="btn btn-secondary">Gerar/Atualizar Relat√≥rio</button>
                </div>

                <h3>Estat√≠sticas R√°pidas</h3>
                <div class="form-grid">
                    <!-- Cards de Estat√≠sticas -->
                    <div class="stat-card">
                        <h3>Total de Usu√°rios</h3>
                        <p id="totalUsuarios">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Total de Acervos</h3>
                        <p id="totalAcervos">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Empr√©stimos Ativos</h3>
                        <p id="totalEmprestimos">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Reservas Pendentes</h3>
                        <p id="totalReservas">0</p>
                    </div>
                </div>
            </section>
            
            <section class="container-card mt-6">
                <h2>üîî Notifica√ß√µes Urgentes</h2>
                <div id="notifications" class="space-y-4">
                    <p class="empty-state">Nenhuma notifica√ß√£o importante.</p>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="max-w-7xl mx-auto text-center">
            <p>&copy; 2024 Biblioteca+ Solu√ß√µes | Tecnologia para o conhecimento</p>
        </div>
    </footer>

    <!-- Link para o novo arquivo JavaScript (Mantido como m√≥dulo para compatibilidade) -->
    <script type="module" src="./script.js"></script>
</body>
</html>

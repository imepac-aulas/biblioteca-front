<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥dulo 2 | Gest√£o de Acervos</title>
    
    <style>
        /* ========================================================= */
        /* CSS: ESTILIZA√á√ÉO DO MENU DE NAVEGA√á√ÉO (Adicionado) */
        /* ========================================================= */
        nav {
            background-color: #007bff;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            /* Adicionado para fixar o menu no topo */
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .logo {
            font-size: 1.5em;
            font-weight: bold;
        }
        .menu {
            display: flex;
            gap: 20px;
        }
        .menu a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        .menu a:hover {
            text-decoration: underline;
            background-color: #0056b3;
        }

        /* ========================================================= */
        /* CSS: ESTILIZA√á√ÉO M√çNIMA (Original e Ajustada) */
        /* ========================================================= */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
            color: #343a40;
        }
        .container {
            max-width: 900px;
            /* Ajuste de margem superior para compensar a nav fixa */
            margin: 20px auto; 
            background-color: #ffffff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative; 
        }
        h1 {
            color: #007bff;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        h2 {
            color: #343a40;
            margin-top: 30px;
            border-left: 5px solid #ffc107;
            padding-left: 10px;
        }
        section {
            padding: 20px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            margin-bottom: 25px;
            background-color: #ffffff;
        }

        /* √çcone de Casa/Voltar: BLOCO REMOVIDO */

        /* Forms e Inputs */
        form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            padding: 15px;
            border: 1px solid #007bff33;
            border-radius: 5px;
            background-color: #f8f9fa;
        }
        input, select {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ced4da;
            box-sizing: border-box;
        }
        .full-row {
            grid-column: 1 / -1;
        }

        /* Bot√µes */
        button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
            margin-right: 5px;
        }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-primary:hover { background-color: #0056b3; }
        .btn-warning { background-color: #ffc107; color: #343a40; }
        .btn-warning:hover { background-color: #e0a800; }
        .btn-danger { background-color: #dc3545; color: white; }
        .btn-danger:hover { background-color: #c82333; }

        /* Tabela */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: left;
            font-size: 0.9em;
        }
        th {
            background-color: #e9ecef;
            color: #495057;
        }
        
        /* Mensagens */
        #messages {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            font-weight: bold;
            display: none;
        }
        .status-ok { color: #28a745; font-weight: bold; }
        .status-alert { color: #dc3545; font-weight: bold; }
    </style>
</head>
<body>

    <nav>
        <div class="logo">Biblioteca+ Solu√ß√µes</div>
        <div class="menu">
            <a href="index.html">index</a>
            <a href="Modulo1.html">Modulo 1</a>
            <a href="Modulo2.html">Modulo 2</a>
            <a href="Modulo3.html">Modulo 3</a>
            <a href="Modulo4.html">Modulo 4</a>
            <a href="Modulo5.html">Modulo 5</a>
        </div>
    </nav>

<div class="container">
    
    <h1>üìö M√≥dulo 2: Gest√£o de Acervos</h1>

    <div id="messages"></div>

    <section>
        <h2>üìù Cadastro e Edi√ß√£o de Acervo</h2>
        <p>Regra de Neg√≥cio: O **Tipo** do item √© obrigat√≥rio, pois define as regras de empr√©stimo/prazo para outros m√≥dulos.</p>
        
        <form id="formAcervo">
            <input type="hidden" id="acervoId">
            <input type="text" id="acervoTitulo" placeholder="T√≠tulo" required>
            <select id="acervoTipo" required>
                <option value="" disabled selected>Tipo *Obrigat√≥rio</option>
                <option value="Livro">Livro</option>
                <option value="Revista">Revista</option>
                <option value="Eletr√¥nico">Eletr√¥nico</option>
            </select>
            <input type="text" id="acervoPatrimonio" placeholder="N¬∫ Patrim√¥nio" required>
            <input type="text" id="acervoLocalizacao" placeholder="Localiza√ß√£o">
            <div class="full-row">
                <button type="submit" class="btn-primary">Salvar</button>
                <button type="button" class="btn-warning" onclick="limparForm('formAcervo')">Limpar</button>
            </div>
        </form>
    </section>
    
    <section>
        <h2>üì¶ Lista de Itens do Acervo</h2>
        <table>
            <thead>
                <tr><th>ID</th><th>T√≠tulo</th><th>Tipo</th><th>N¬∫ Patrim√¥nio</th><th>Status (Simulado)</th><th>A√ß√µes</th></tr>
            </thead>
            <tbody id="listaAcervos"></tbody>
        </table>
    </section>

</div>

<script>
    // =========================================================
    // JAVASCRIPT: SIMULA√á√ÉO DE DADOS E L√ìGICA DO M√ìDULO 2
    // =========================================================
    
    let acervos = [];
    let nextAcervoId = 1;
    
    // --- Fun√ß√µes Auxiliares ---
    
    function loadData() {
        const stored = localStorage.getItem('acervosData');
        if (stored) {
            try {
                const data = JSON.parse(stored);
                acervos = data.acervos || [];
                nextAcervoId = data.nextId || 1;
            } catch (e) {
                // Se o localStorage estiver corrompido, inicia com dados padr√£o
                setupInitialData();
            }
        } else {
            // Se n√£o houver dados, inicia com dados de exemplo
            setupInitialData();
        }
        saveData(false); // Salva para garantir que os dados iniciais est√£o no storage
    }

    function setupInitialData() {
        acervos = [
            { id: 1, titulo: "1984", tipo: "Livro", patrimonio: "LIV001", status: "Dispon√≠vel", localizacao: "Estante A1" },
            { id: 2, titulo: "Laptop Dell", tipo: "Eletr√¥nico", patrimonio: "ELE005", status: "Emprestado", localizacao: "Arm√°rio C" },
            { id: 3, titulo: "National Geographic", tipo: "Revista", patrimonio: "REV010", status: "Dispon√≠vel", localizacao: "Estante R1" }
        ];
        nextAcervoId = acervos.length > 0 ? Math.max(...acervos.map(a => a.id)) + 1 : 1;
    }

    function saveData(doRender = true) {
        localStorage.setItem('acervosData', JSON.stringify({ acervos: acervos, nextId: nextAcervoId }));
        if (doRender) renderAcervos();
    }

    function displayMessage(text, type = 'info') {
        const msgDiv = document.getElementById('messages');
        let color, bg;
        if (type === 'success') { color = '#155724'; bg = '#d4edda'; }
        else if (type === 'error') { color = '#721c24'; bg = '#f8d7da'; }
        else { color = '#004085'; bg = '#cce5ff'; }
        
        msgDiv.style.display = 'block';
        msgDiv.style.color = color;
        msgDiv.style.backgroundColor = bg;
        msgDiv.textContent = text;
        
        setTimeout(() => { msgDiv.style.display = 'none'; }, 7000);
    }

    // A fun√ß√£o window.voltarAoInicio foi removida.

    window.limparForm = function(formId) {
        document.getElementById(formId).reset();
        document.getElementById('acervoId').value = '';
        document.getElementById('acervoTitulo').focus();
        displayMessage('Formul√°rio limpo. Pronto para um novo cadastro.', 'info');
    }

    // --- L√≥gica de CRUD (Acervo) ---

    document.getElementById('formAcervo').addEventListener('submit', function(e) {
        e.preventDefault();

        const id = document.getElementById('acervoId').value;
        const titulo = document.getElementById('acervoTitulo').value.trim();
        const tipo = document.getElementById('acervoTipo').value;
        const patrimonio = document.getElementById('acervoPatrimonio').value.trim();
        const localizacao = document.getElementById('acervoLocalizacao').value.trim();

        if (!tipo) {
             displayMessage("O Tipo do item √© obrigat√≥rio.", 'error');
             return;
        }

        if (id) {
            // Edi√ß√£o
            const index = acervos.findIndex(a => a.id === parseInt(id));
            if (index !== -1) {
                acervos[index] = {
                    id: parseInt(id),
                    titulo,
                    tipo,
                    patrimonio,
                    localizacao,
                    status: acervos[index].status // Mant√©m o status atual
                };
                displayMessage(`Item "${titulo}" atualizado com sucesso.`, 'success');
            }
        } else {
            // Novo Cadastro
            const novoAcervo = {
                id: nextAcervoId++,
                titulo,
                tipo,
                patrimonio,
                localizacao,
                status: "Dispon√≠vel"
            };
            acervos.push(novoAcervo);
            displayMessage(`Item "${titulo}" (ID: ${novoAcervo.id}) cadastrado com sucesso.`, 'success');
        }

        limparForm('formAcervo');
        saveData();
    });

    window.editarAcervo = function(id) {
        const item = acervos.find(a => a.id === id);
        if (item) {
            document.getElementById('acervoId').value = item.id;
            document.getElementById('acervoTitulo').value = item.titulo;
            document.getElementById('acervoTipo').value = item.tipo;
            document.getElementById('acervoPatrimonio').value = item.patrimonio;
            document.getElementById('acervoLocalizacao').value = item.localizacao;
            document.getElementById('acervoTitulo').focus();
            displayMessage(`Editando item ID: ${item.id} - ${item.titulo}`, 'info');
        }
    }

    window.excluirAcervo = function(id) {
        if (confirm(`Tem certeza que deseja excluir o item ID ${id}?`)) {
            const index = acervos.findIndex(a => a.id === id);
            if (index !== -1) {
                const itemTitulo = acervos[index].titulo;
                acervos.splice(index, 1);
                saveData();
                displayMessage(`Item "${itemTitulo}" (ID: ${id}) exclu√≠do.`, 'error');
            }
        }
    }

    // --- Renderiza√ß√£o da Tabela ---

    function renderAcervos() {
        const lista = document.getElementById('listaAcervos');
        lista.innerHTML = '';

        acervos.forEach(item => {
            const row = lista.insertRow();
            
            // Colunas de dados
            row.insertCell().textContent = item.id;
            row.insertCell().textContent = item.titulo;
            row.insertCell().textContent = item.tipo;
            row.insertCell().textContent = item.patrimonio;
            
            const statusCell = row.insertCell();
            statusCell.textContent = item.status;
            statusCell.classList.add(item.status === 'Dispon√≠vel' ? 'status-ok' : 'status-alert');

            // Coluna de A√ß√µes
            const actionsCell = row.insertCell();
            
            const editBtn = document.createElement('button');
            editBtn.textContent = 'Editar';
            editBtn.className = 'btn-warning';
            editBtn.onclick = () => editarAcervo(item.id);
            
            const deleteBtn = document.createElement('button');
            deleteBtn.textContent = 'Excluir';
            deleteBtn.className = 'btn-danger';
            deleteBtn.onclick = () => excluirAcervo(item.id);

            actionsCell.appendChild(editBtn);
            actionsCell.appendChild(deleteBtn);
        });
    }

    // Inicializa√ß√£o
    window.onload = loadData;
</script>

</body>
</html>